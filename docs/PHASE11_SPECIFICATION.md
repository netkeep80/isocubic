# Фаза 11: Новый пользовательский интерфейс isocubic

## Техническое задание (ТЗ)

### Цель
Разработка нового настраиваемого пользовательского интерфейса с оконным менеджером, обеспечивающего удобный доступ ко всему функционалу приложения.

### Требования

#### 1. Оконный менеджер (Window Manager)
- Каждый компонент приложения отображается в отдельном окне
- Окна поддерживают:
  - **Перетаскивание** (drag) — за заголовок окна
  - **Изменение размера** (resize) — за правый нижний угол
  - **Сворачивание** (minimize) — в панель задач внизу экрана
  - **Закрытие** (close) — с возможностью повторного открытия
  - **Z-order** — клик по окну выносит его на передний план
- Состояние окон (позиция, размер, открыто/свёрнуто) сохраняется в localStorage

#### 2. Доступные окна компонентов
Все функциональные компоненты из предыдущих фаз доступны как окна:
- **Gallery** — галерея пресетов кубов
- **CubePreview** — 3D превью текущего куба
- **UnifiedEditor** — редактор параметров (Spectral, FFT, Stack)
- **PromptGenerator** — генерация кубов по описанию (AI)
- **ExportPanel** — экспорт/импорт кубов
- **ActionHistory** — история действий с undo/redo
- **CommunityGallery** — галерея сообщества
- **SharePanel** — панель публикации
- **SessionPanel** — управление совместными сессиями
- **NotificationPanel** — уведомления
- **UserProfile** — профиль пользователя

#### 3. Командная строка TinyLLM
- Расположена в верхней части главного окна
- Позволяет:
  - Искать и открывать окна компонентов по имени
  - Выполнять действия: генерация куба, экспорт, поиск пресета
  - Быстрый доступ к настройкам
- Активация: клик по строке или горячая клавиша (Ctrl+K)
- Интеграция с TinyLLM для понимания естественного языка

### Архитектура

#### Новые файлы
1. `src/composables/useWindowManager.ts` — composable для управления состоянием окон
2. `src/components/DraggableWindow.vue` — компонент перетаскиваемого окна
3. `src/components/CommandBar.vue` — командная строка TinyLLM
4. `src/components/WindowTaskbar.vue` — панель задач со свёрнутыми окнами

#### Изменения в существующих файлах
- `src/App.vue` — интеграция нового оконного лейаута для desktop
- `src/App.css` — стили для нового лейаута

### План реализации

| # | Задача | Описание |
|---|--------|----------|
| 1 | useWindowManager | Composable: позиции, размеры, z-order, localStorage |
| 2 | DraggableWindow | Компонент окна с drag, resize, minimize, close |
| 3 | CommandBar | Командная строка с поиском компонентов |
| 4 | WindowTaskbar | Панель задач для свёрнутых окон |
| 5 | Интеграция App.vue | Новый десктопный лейаут с оконным менеджером |
| 6 | Тесты | Unit-тесты для всех новых компонентов |

### Совместимость
- Планшетный и мобильный лейауты остаются без изменений
- Новый оконный интерфейс доступен только на desktop
- Существующий функционал всех фаз полностью сохранён
